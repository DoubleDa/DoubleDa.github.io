<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="android,node.js,react native,ios,mongodb,weex,java"><title>RxJava高阶用法 | 哒哒</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">RxJava高阶用法</h1><a id="logo" href="/.">哒哒</a><p class="description">Keep engineers playfully</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/project/"><i class="fa fa-github"> project</i></a><a href="/resume/"><i class="fa fa-rss"> resume</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">RxJava高阶用法</h1><div class="post-meta"><a href="/2017/10/25/rxjava-high-use/#comments" class="comment-count"></a><p><span class="date">Oct 25, 2017</span><span><a href="/categories/RxJava/" class="category">RxJava</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Hits</i></i></span></p></div><div class="post-content"><p>RxJava高阶用法<br><a id="more"></a></p>
<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//rxjava</span></div><div class="line">compile <span class="string">'io.reactivex.rxjava2:rxjava:2.1.5'</span></div><div class="line"><span class="comment">//rxandroid</span></div><div class="line">compile <span class="string">'io.reactivex.rxjava2:rxandroid:2.0.1'</span></div><div class="line"><span class="comment">//rxbinding</span></div><div class="line">compile <span class="string">'com.jakewharton.rxbinding:rxbinding:0.4.0'</span></div><div class="line">compile <span class="string">'com.jakewharton.rxbinding:rxbinding-support-v4:0.4.0'</span></div><div class="line"><span class="comment">//rxlifecycle</span></div><div class="line">compile <span class="string">'com.trello:rxlifecycle:1.0'</span></div><div class="line"><span class="comment">//okhttp3</span></div><div class="line">compile <span class="string">'com.squareup.okhttp3:okhttp:3.9.0'</span></div><div class="line"><span class="comment">//retrofit</span></div><div class="line">compile <span class="string">'com.squareup.retrofit2:retrofit:2.1.0'</span></div><div class="line">compile <span class="string">'com.squareup.retrofit2:converter-gson:2.1.0'</span></div><div class="line">compile <span class="string">'com.squareup.retrofit2:adapter-rxjava:2.1.0'</span></div><div class="line"><span class="comment">//rxbus</span></div><div class="line">compile <span class="string">'com.hwangjr.rxbus:rxbus:1.0.6'</span></div></pre></td></tr></table></figure>
<h2 id="RxJava替换AsyncTask"><a href="#RxJava替换AsyncTask" class="headerlink" title="RxJava替换AsyncTask"></a>RxJava替换AsyncTask</h2><p>使用RxJava调用的Observable替代AsyncTask调用。类似于AsyncTask在<code>doInBackground()</code>中执行任务，然后调用<code>onPostExecute()</code>在主线程更新UI，RxJava可以使用<code>subscribeOn()</code>执行后台任务，然后使用<code>observeOn()</code>定义回调线程：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Observable&lt;Bitmap&gt; <span class="title">getImageNetworkCall</span><span class="params">()</span> </span>&#123;</div><div class="line">    Observable observable = Observable.create(<span class="keyword">new</span> ObservableOnSubscribe() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(@NonNull <span class="keyword">final</span> ObservableEmitter emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">            RxJavaCallAdapterFactory rxAdapter = RxJavaCallAdapterFactory.create();</div><div class="line">            Retrofit retrofit = <span class="keyword">new</span> Retrofit</div><div class="line">                    .Builder()</div><div class="line">                    .baseUrl(ApiConstants.URL_IMG_ROOT)</div><div class="line">                    .addCallAdapterFactory(rxAdapter)</div><div class="line">                    .addConverterFactory(GsonConverterFactory.create())</div><div class="line">                    .build();</div><div class="line">            ApiService apiService = retrofit.create(ApiService.class);</div><div class="line">            rx.Observable&lt;ResponseBody&gt; call = apiService.downloadImgFromNet(ApiConstants.URL_IMG);</div><div class="line">            call.subscribeOn(rx.schedulers.Schedulers.newThread()).map(<span class="keyword">new</span> Func1&lt;ResponseBody, Bitmap&gt;() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> Bitmap <span class="title">call</span><span class="params">(ResponseBody responseBody)</span> </span>&#123;</div><div class="line">                    Bitmap bitmap = BitmapFactory.decodeStream(responseBody.byteStream());</div><div class="line">                    emitter.onNext(bitmap);</div><div class="line">                    emitter.onComplete();</div><div class="line">                    <span class="keyword">return</span> bitmap;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> observable;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用<code>getImageNetworkCall()</code>获取<code>Observable&lt;Bitmap&gt;</code>对象，接着将回去到的<code>Observable&lt;Bitmap&gt;</code>通过RxJava显示到指定控件：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">getImageNetworkCall()</div><div class="line">        .subscribeOn(Schedulers.io())</div><div class="line">        .observeOn(AndroidSchedulers.mainThread())</div><div class="line">        .subscribe(<span class="keyword">new</span> Observer&lt;Bitmap&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(@NonNull Disposable d)</span> </span>&#123;</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(@NonNull Bitmap bitmap)</span> </span>&#123;</div><div class="line">                Logger.d(<span class="string">"aaa"</span>);</div><div class="line">                ivRxJava.setImageBitmap(bitmap);</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(@NonNull Throwable e)</span> </span>&#123;</div><div class="line">                Logger.d(e.getMessage());</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</div><div class="line">                Logger.d(<span class="string">"***onComplete***"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure></p>
<h2 id="RxJava结合OkHttp访问网络"><a href="#RxJava结合OkHttp访问网络" class="headerlink" title="RxJava结合OkHttp访问网络"></a>RxJava结合OkHttp访问网络</h2><p>首先，使用<code>getObservable()</code>获取<code>Observable&lt;String&gt;</code>对象，<code>Observable&lt;String&gt;</code>包含了进行OkHttp请求的响应字符串：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Observable&lt;String&gt; <span class="title">getObservable</span><span class="params">(<span class="keyword">final</span> String url)</span> </span>&#123;</div><div class="line">    Observable observable = Observable.create(<span class="keyword">new</span> ObservableOnSubscribe() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(@NonNull <span class="keyword">final</span> ObservableEmitter emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">            mOkHttpClient = <span class="keyword">new</span> OkHttpClient();</div><div class="line">            Request request = <span class="keyword">new</span> Request.Builder().url(url).build();</div><div class="line">            Call call = mOkHttpClient.newCall(request);</div><div class="line">            call.enqueue(<span class="keyword">new</span> Callback() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call call, IOException e)</span> </span>&#123;</div><div class="line">                    emitter.onError(<span class="keyword">new</span> Exception(e.getMessage()));</div><div class="line">                &#125;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call call, Response response)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">                    String result = response.body().string();</div><div class="line">                    emitter.onNext(result);</div><div class="line">                    emitter.onComplete();</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> observable;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在获取到<code>Observable&lt;String&gt;</code>对象之后，使用RxJava将获取到的响应在主线程进行显示：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">getObservable(url)</div><div class="line">        .subscribeOn(Schedulers.io())</div><div class="line">        .observeOn(AndroidSchedulers.mainThread())</div><div class="line">        .subscribe(<span class="keyword">new</span> Observer&lt;String&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(@NonNull Disposable d)</span> </span>&#123;</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(@NonNull String s)</span> </span>&#123;</div><div class="line">                Logger.d(s);</div><div class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> != tvRxOkhttp &amp;&amp; !TextUtils.isEmpty(s)) &#123;</div><div class="line">                    tvRxOkhttp.setText(s);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(@NonNull Throwable e)</span> </span>&#123;</div><div class="line">                Logger.d(e.getMessage());</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</div><div class="line">                Logger.d(<span class="string">"***onComplete***"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure></p>
<h2 id="RxJava结合Retrofit访问网络"><a href="#RxJava结合Retrofit访问网络" class="headerlink" title="RxJava结合Retrofit访问网络"></a>RxJava结合Retrofit访问网络</h2><p>RxJava结合Retrofit进行网络请求是一个很完美的选择，首先，定义服务器响应为<code>Observable</code>对的的接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ApiService</span> </span>&#123;</div><div class="line">    <span class="meta">@GET</span>(ApiConstants.URL_CNODEJS_TOPIC)</div><div class="line">    <span class="function">Observable&lt;TopicByIdBean&gt; <span class="title">getTopicById</span><span class="params">(@Path(<span class="string">"id"</span>)</span> String id)</span>;</div><div class="line">    <span class="meta">@GET</span>(ApiConstants.URL_IMG)</div><div class="line">    <span class="function">Observable&lt;ResponseBody&gt; <span class="title">downloadImgFromNet</span><span class="params">(@Path(<span class="string">"imgUrl"</span>)</span> String imgUrl)</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接着，初始化接口并得到返回的<code>Observable</code>：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">RxJavaCallAdapterFactory rxAdapter = RxJavaCallAdapterFactory.create();</div><div class="line">Retrofit retrofit = <span class="keyword">new</span> Retrofit</div><div class="line">        .Builder()</div><div class="line">        .baseUrl(ApiConstants.URL_CNODEJS_ROOT)</div><div class="line">        .addConverterFactory(GsonConverterFactory.create())</div><div class="line">        .addCallAdapterFactory(rxAdapter)</div><div class="line">        .build();</div><div class="line">ApiService apiService = retrofit.create(ApiService.class);</div><div class="line">Observable&lt;TopicByIdBean&gt; call = apiService.getTopicById(ApiConstants.TOPIC_ID);</div><div class="line">call.subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(<span class="keyword">new</span> Observer&lt;TopicByIdBean&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">        Logger.d(<span class="string">"***onCompleted***"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">        Logger.d(e.getMessage());</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(TopicByIdBean topicByIdBean)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (topicByIdBean != <span class="keyword">null</span>) &#123;</div><div class="line">            tvRxRetrofit.setText(topicByIdBean.getData().getContent());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="RxBus"><a href="#RxBus" class="headerlink" title="RxBus"></a>RxBus</h2><p>用RxJava简单实现EventBus功能的RxBus，提供发送、接收事件功能：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RxBus</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Subject&lt;Object, Object&gt; subject = <span class="keyword">new</span> SerializedSubject&lt;&gt;(PublishSubject.create());</div><div class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> RxBus instance;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">RxBus</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RxBus <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">synchronized</span> (RxBus.class) &#123;</div><div class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">                    instance = <span class="keyword">new</span> RxBus();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 发生事件</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> object</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">post</span><span class="params">(Object object)</span> </span>&#123;</div><div class="line">        Logger.d(object);</div><div class="line">        subject.onNext(object);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 接收事件</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> type</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></div><div class="line"><span class="comment">     * <span class="doctag">@return</span></span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">Observable&lt;T&gt; <span class="title">receiver</span><span class="params">(Class&lt;T&gt; type)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> subject.ofType(type);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在需要发送事件的地方添加以下代码即可：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RxBus.getInstance().post(<span class="keyword">new</span> MyEvent(<span class="string">"使用自实现RxBus发生消息！"</span>));</div></pre></td></tr></table></figure></p>
<p>在使用事件消息的地方，添加介绍事件代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">subscription = RxBus.getInstance().receiver(MyEvent.class).subscribe(<span class="keyword">new</span> Action1&lt;MyEvent&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(MyEvent myEvent)</span> </span>&#123;</div><div class="line">        tvRxRepAsyn.setText(myEvent.getTitle());</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="RxLifecycle"><a href="#RxLifecycle" class="headerlink" title="RxLifecycle"></a>RxLifecycle</h2><p><code>RxLifecycle</code>是为了防止RxJava中subscription导致内存泄漏而诞生的，核心思想是通过监听Activity、Fragment的生命周期，来自动断开subscription以防止内存泄漏。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"RxLifecycle"</span>;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    Log.d(TAG, <span class="string">"onCreate()"</span>);</div><div class="line">    setContentView(R.layout.activity_main);</div><div class="line">    <span class="comment">//设置绑定在onPause取消订阅</span></div><div class="line">    Observable.interval(<span class="number">1</span>, TimeUnit.SECONDS)</div><div class="line">        .doOnDispose(<span class="keyword">new</span> Action() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">                Log.i(TAG, <span class="string">"Unsubscribing subscription from onCreate()"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .compose(<span class="keyword">this</span>.&lt;Long&gt;bindUntilEvent(ActivityEvent.PAUSE))</div><div class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;Long&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Long num)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">                Log.i(TAG, <span class="string">"Started in onCreate(), running until onPause(): "</span> + num);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onStart();</div><div class="line">    Log.d(TAG, <span class="string">"onStart()"</span>);</div><div class="line">    <span class="comment">//自动取消订阅示例，在onStart的时候调用，在onStop的时候自动取消订阅</span></div><div class="line">    Observable.interval(<span class="number">1</span>, TimeUnit.SECONDS)</div><div class="line">        .doOnDispose(<span class="keyword">new</span> Action() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">                Log.i(TAG, <span class="string">"Unsubscribing subscription from onStart()"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .compose(<span class="keyword">this</span>.&lt;Long&gt;bindToLifecycle())</div><div class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;Long&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Long num)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">                Log.i(TAG, <span class="string">"Started in onStart(), running until in onStop(): "</span> + num);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onResume();</div><div class="line">    Log.d(TAG, <span class="string">"onResume()"</span>);</div><div class="line">    <span class="comment">//设置绑定在onDestroy取消订阅</span></div><div class="line">    Observable.interval(<span class="number">1</span>, TimeUnit.SECONDS)</div><div class="line">        .doOnDispose(<span class="keyword">new</span> Action() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">                Log.i(TAG, <span class="string">"Unsubscribing subscription from onResume()"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .compose(<span class="keyword">this</span>.&lt;Long&gt;bindUntilEvent(ActivityEvent.DESTROY))</div><div class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;Long&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Long num)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">                Log.i(TAG, <span class="string">"Started in onResume(), running until in onDestroy(): "</span> + num);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onPause();</div><div class="line">    Log.d(TAG, <span class="string">"onPause()"</span>);</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onStop();</div><div class="line">    Log.d(TAG, <span class="string">"onStop()"</span>);</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onDestroy();</div><div class="line">    Log.d(TAG, <span class="string">"onDestroy()"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="RxBinding"><a href="#RxBinding" class="headerlink" title="RxBinding"></a>RxBinding</h2><p>使用RxJava的好处之一是能够以一种更直接的方式组合异步事件。在Android中，复杂的UI交互也可以被大大简化，尤其是在有多个UI事件可以触发的情况下。为了描述与标准的Android代码的交互模式，您通常需要使用<code>listeners</code>、<code>Handlers</code>和<code>AsyncTask</code>的组合。使用RxJava和RxBinding，可以大大简化这个逻辑，并且可以描述多个UI组件之间的交互模式。</p>
<p>Button的<code>setOnClickListener</code>可以这么写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Button button = (Button) findViewById(R.id.btn_rxbinding);</div><div class="line">Subscription btnSub = RxView.clicks(button).subscribe(<span class="keyword">new</span> Action1&lt;Void&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Void aVoid)</span> </span>&#123;</div><div class="line">        Logger.d(<span class="string">"***rxbinding***"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>EditText的<code>addTextChangedListener</code>可以这么写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">EditText editText = (EditText) findViewById(R.id.et_rxbinding);</div><div class="line">Subscription etSub = RxTextView.textChanges(editText).subscribe(<span class="keyword">new</span> Action1&lt;CharSequence&gt;() </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(CharSequence charSequence)</span> </span>&#123;</div><div class="line">        Logger.d(String.valueOf(<span class="string">"rxbinding："</span> + charSequence));</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>除此之外，还可以使用EditText实现“搜索组件”功能：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">EditText etSearch = (EditText) findViewById(R.id.et_search);</div><div class="line">Subscription searchSub = RxTextView.textChanges(etSearch)</div><div class="line">        .filter(<span class="keyword">new</span> Func1&lt;CharSequence, Boolean&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">(CharSequence charSequence)</span> </span>&#123;</div><div class="line">                <span class="comment">//字符长度大于3触发查询服务器</span></div><div class="line">                <span class="keyword">return</span> String.valueOf(charSequence).length() &gt; <span class="number">3</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .debounce(<span class="number">100</span>, TimeUnit.MILLISECONDS)<span class="comment">//过滤100ms之内的操作</span></div><div class="line">        .switchMap(<span class="keyword">new</span> Func1&lt;CharSequence, Observable&lt;SearchResultBean&gt;&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Observable&lt;SearchResultBean&gt; <span class="title">call</span><span class="params">(CharSequence charSequence)</span> </span>&#123;</div><div class="line">                <span class="comment">//请求服务器得到响应</span></div><div class="line">                <span class="keyword">return</span> fetchResultFromServer(String.valueOf(charSequence));</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(<span class="keyword">new</span> Observer&lt;SearchResultBean&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">                Logger.d(<span class="string">"***onCompleted***"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">            &#125;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(SearchResultBean searchResultBean)</span> </span>&#123;</div><div class="line">                <span class="comment">//TODO 处理查询结果</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure></p>
<p>注意：在使用RxBinding进行UI组件的操作时，创建了许多<code>Subscription</code>对象，可以引入<code>RxLifecycle</code>避免因为<code>Subscription</code>引起的内存泄漏，也可以手动在<code>onDestroy</code>进行以下操作：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onDestroy();</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != btnSub &amp;&amp; btnSub.isUnsubscribed()) &#123;</div><div class="line">        btnSub.unsubscribe();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/RxJava/">RxJava</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/10/27/retrofit-base-use/" class="pre">Android Retrofit完全解析(上)：Retrofit用法</a><a href="/2017/10/25/rxjava-base-use/" class="next">RxJava基本用法</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contents</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#添加依赖"><span class="toc-text">添加依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxJava替换AsyncTask"><span class="toc-text">RxJava替换AsyncTask</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxJava结合OkHttp访问网络"><span class="toc-text">RxJava结合OkHttp访问网络</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxJava结合Retrofit访问网络"><span class="toc-text">RxJava结合Retrofit访问网络</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxBus"><span class="toc-text">RxBus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxLifecycle"><span class="toc-text">RxLifecycle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxBinding"><span class="toc-text">RxBinding</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/27/retrofit-base-advance/">Android Retrofit完全解析(下)：Retrofit源码解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/27/retrofit-base-use/">Android Retrofit完全解析(上)：Retrofit用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/rxjava-high-use/">RxJava高阶用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/rxjava-base-use/">RxJava基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/builder-pattern/">设计模式之建造者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-use-realm/">Realm数据库使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-ndk-jni/">Android的JNI和NDK编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-hotfix/">Android热修复框架AndFix解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-component-demo/">Android项目组件化实战</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-custom-view/">Android自定义View实战</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design-pattern/">Design pattern</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RxJava/">RxJava</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/okhttp源码解析/" style="font-size: 15px;">okhttp源码解析</a> <a href="/tags/加固渠道/" style="font-size: 15px;">加固渠道</a> <a href="/tags/RxJava-MVP-Retrofit/" style="font-size: 15px;">RxJava MVP Retrofit</a> <a href="/tags/https接口/" style="font-size: 15px;">https接口</a> <a href="/tags/适配器模式/" style="font-size: 15px;">适配器模式</a> <a href="/tags/组件化/" style="font-size: 15px;">组件化</a> <a href="/tags/Android架构/" style="font-size: 15px;">Android架构</a> <a href="/tags/JNI和NDK/" style="font-size: 15px;">JNI和NDK</a> <a href="/tags/热修复/" style="font-size: 15px;">热修复</a> <a href="/tags/自定义View/" style="font-size: 15px;">自定义View</a> <a href="/tags/RecyclerView/" style="font-size: 15px;">RecyclerView</a> <a href="/tags/OkHttp用法/" style="font-size: 15px;">OkHttp用法</a> <a href="/tags/realm/" style="font-size: 15px;">realm</a> <a href="/tags/建造者模式/" style="font-size: 15px;">建造者模式</a> <a href="/tags/Glide源码解析/" style="font-size: 15px;">Glide源码解析</a> <a href="/tags/Glide用法/" style="font-size: 15px;">Glide用法</a> <a href="/tags/观察者模式/" style="font-size: 15px;">观察者模式</a> <a href="/tags/Retrofit/" style="font-size: 15px;">Retrofit</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/单例模式/" style="font-size: 15px;">单例模式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> Blogroll</i></div><ul></ul><a href="https://guides.codepath.com/android" title="CodePath" target="_blank">CodePath</a><ul></ul><a href="https://realm.io/" title="Realm" target="_blank">Realm</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">RSS</a> |  <a href="/about/">About</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">dayongxin.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>