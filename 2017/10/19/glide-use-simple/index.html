<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="android,node.js,react native,ios,mongodb,weex,java"><title>Android Glide完全解析(上)：Glide用法 | 哒哒</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Android Glide完全解析(上)：Glide用法</h1><a id="logo" href="/.">哒哒</a><p class="description">Keep engineers playfully</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Accueil</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/project/"><i class="fa fa-github"> project</i></a><a href="/resume/"><i class="fa fa-rss"> resume</i></a><a href="/about/"><i class="fa fa-user"> À propos</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Android Glide完全解析(上)：Glide用法</h1><div class="post-meta"><a href="/2017/10/19/glide-use-simple/#comments" class="comment-count"></a><p><span class="date">Oct 19, 2017</span><span><a href="/categories/Android/" class="category">Android</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Les coups</i></i></span></p></div><div class="post-content"><p>Glide用法</p>
<a id="more"></a>
<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//glide</span></div><div class="line"><span class="keyword">compile</span> <span class="string">'com.github.bumptech.glide:glide:3.8.0'</span></div><div class="line"><span class="comment">//使用okhttp替换volley</span></div><div class="line"><span class="keyword">compile</span> <span class="string">'com.github.bumptech.glide:okhttp3-integration:1.4.0@aar'</span></div></pre></td></tr></table></figure>
<h2 id="Glide基本用法"><a href="#Glide基本用法" class="headerlink" title="Glide基本用法"></a>Glide基本用法</h2><ul>
<li>简单使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).into(ivGlide);</div></pre></td></tr></table></figure>
<ul>
<li>修剪图片大小</li>
</ul>
<p>使用<code>override()</code>属性设置图片宽高：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).override(DensityUtils.dip2px(<span class="keyword">this</span>,<span class="number">200</span>), DensityUtils.dip2px(<span class="keyword">this</span>,<span class="number">300</span>)).into(ivGlide);</div></pre></td></tr></table></figure>
<ul>
<li>设置占位图和错误图</li>
</ul>
<p>使用<code>placeholder()</code>属性设置图片占位图，使用<code>error()</code>属性设置错误图片：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).placeholder(R.drawable.ic_placeholder).error(R.drawable.ic_error).into(ivGlide);</div></pre></td></tr></table></figure>
<ul>
<li>裁剪图片</li>
</ul>
<p>使用<code>centerCrop()</code>属性或者<code>fitCenter()</code>属性裁剪图片：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).centerCrop().into(ivGlide);</div></pre></td></tr></table></figure>
<h2 id="配置Glide"><a href="#配置Glide" class="headerlink" title="配置Glide"></a>配置Glide</h2><ul>
<li>新建继承自GlideModule的<code>GlideConfigor.java</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlideConfigor</span> <span class="keyword">implements</span> <span class="title">GlideModule</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">applyOptions</span><span class="params">(Context context, GlideBuilder builder)</span> </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * 1、在这里为构建器应用选项；</span></div><div class="line"><span class="comment">         * 2、Glide默认位图格式被设置为rgb565，因为与argb8888相比它只消耗了50%的内存；</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="comment">//为了保证图片质量增加内存消耗</span></div><div class="line">        builder.setDecodeFormat(DecodeFormat.PREFER_ARGB_8888);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerComponents</span><span class="params">(Context context, Glide glide)</span> </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * 注册ModelLoaders</span></div><div class="line"><span class="comment">         */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>在<code>AndroidManifest.xml</code>中设置GlideConfigor</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></div><div class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.dyx.asca.GlideConfigor"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">"GlideModule"</span> /&gt;</span></div></pre></td></tr></table></figure>
<h2 id="裁剪图片"><a href="#裁剪图片" class="headerlink" title="裁剪图片"></a>裁剪图片</h2><p>在理想情况下，图片的尺寸与显示的<code>ImageView</code>的大小完全一致，但由于这通常不是这样，所以必须要特别小心地调整其大小或适当地缩放图像。Android的本地支持并不是很强大，特别是在小的视图中显示非常大的图像(比如从相机返回的位图)，这通常会导致错误。</p>
<p>Glide自动将它保存在内存中的图像大小限制为ImageView大小。Picasso也有同样的能力，但是需要调用<code>fit()</code>。对于Glide，如果不想让图像自动适配到ImageView，可以访问<code>override(horizontalSize，verticalSize)</code>。在ImageView中显示之前将改变图像的大小，但并不能保证图像的纵横比。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).override(DensityUtils.dip2px(<span class="keyword">this</span>,<span class="number">200</span>), DensityUtils.dip2px(<span class="keyword">this</span>,<span class="number">300</span>)).into(ivGlide);</div></pre></td></tr></table></figure>
<p>以这种方式裁剪图像，而不考虑原始的宽比，通常会使图像显得扭曲或失真。在大多数情况下，应该避免这种情况，而Glide提供了两种标准的缩放转换选项来防止这种情况:<code>centerCrop</code>和<code>fitCenter</code>。</p>
<p>如果只调整一个方向的大小，那么就使用<code>Target.SIZE_ORIGINAL</code>作为另一个维度的占位符:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).override(DensityUtils.dip2px(<span class="keyword">this</span>, <span class="number">200</span>), Target.SIZE_ORIGINAL).into(ivGlide);</div></pre></td></tr></table></figure>
<ul>
<li>centerCrop()</li>
</ul>
<p>调用<code>centerCrop()</code>将图像缩放，这样它就可以填满图像视图的请求范围，然后再进行额外的裁剪。ImageView将被完全填满，但整个图像可能不会被显示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).override(DensityUtils.dip2px(<span class="keyword">this</span>, <span class="number">200</span>), DensityUtils.dip2px(<span class="keyword">this</span>, <span class="number">300</span>)).centerCrop().into(ivGlide);</div></pre></td></tr></table></figure>
<ul>
<li>fitCenter()</li>
</ul>
<p>调用<code>fitCenter()</code>对图像进行缩放，使这两个维度都等于或小于ImageView的请求范围。图像将被完全显示，但可能不会填充整个ImageView。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).override(DensityUtils.dip2px(<span class="keyword">this</span>, <span class="number">200</span>), DensityUtils.dip2px(<span class="keyword">this</span>, <span class="number">300</span>)).fitCenter().into(ivGlide);</div></pre></td></tr></table></figure>
<h2 id="调试程序"><a href="#调试程序" class="headerlink" title="调试程序"></a>调试程序</h2><h3 id="OOM加载错误"><a href="#OOM加载错误" class="headerlink" title="OOM加载错误"></a>OOM加载错误</h3><p>首先，找到正在加载的哪个图像可能导致这个错误。对于任何给定的Glide方法，都可以通过以下一种或多种方法来解决这个问题:</p>
<ul>
<li>在布局文件中为<code>ImageView</code>显式的设置宽高</li>
<li>在Glide加载图片时调用<code>override(width, height)</code>显式的设置ImageView宽高</li>
<li>如果不调用<code>override()</code>的话，尝试在<code>ImageView</code>移除<code>adjustViewBounds=&quot;true&quot;</code></li>
<li>要确保待显示的静态占位图或错误图相对较小，如果不是的话，调整静态图的大小并放到项目指定目录</li>
</ul>
<p>除此之外，也可以在<code>AndroidManifest.xml</code>做如下配置减少内存错误：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">application</span></span></div><div class="line"><span class="tag">		<span class="attr">...</span></span></div><div class="line"><span class="tag">        <span class="attr">android:largeHeap</span>=<span class="string">"true"</span></span></div><div class="line"><span class="tag">        <span class="attr">...</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="加载错误"><a href="#加载错误" class="headerlink" title="加载错误"></a>加载错误</h3><p>创建<code>RequestListener&lt;String, GlideDrawable&gt;</code>并通过<code>Glide.listener()</code>捕获错误：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).placeholder(R.drawable.ic_placeholder).error(R.drawable.ic_error).listener(<span class="keyword">new</span> RequestListener&lt;String, GlideDrawable&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onException</span><span class="params">(Exception e, String model, Target&lt;GlideDrawable&gt; target, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">        Logger.d(<span class="string">"Glide Image Loading Error:"</span> + e);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onResourceReady</span><span class="params">(GlideDrawable resource, String model, Target&lt;GlideDrawable&gt; target, <span class="keyword">boolean</span> isFromMemoryCache, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;).into(ivGlide);</div></pre></td></tr></table></figure>
<h2 id="变换图片"><a href="#变换图片" class="headerlink" title="变换图片"></a>变换图片</h2><p>需要添加的依赖有：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//glide transformations</span></div><div class="line"><span class="keyword">compile</span> <span class="string">'jp.wasabeef:glide-transformations:2.0.2'</span></div><div class="line"><span class="comment">//使用GPU</span></div><div class="line"><span class="keyword">compile</span> <span class="string">'jp.co.cyberagent.android.gpuimage:gpuimage-library:1.4.1'</span></div></pre></td></tr></table></figure>
<h3 id="圆角图片"><a href="#圆角图片" class="headerlink" title="圆角图片"></a>圆角图片</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).bitmapTransform(<span class="keyword">new</span> RoundedCornersTransformation(<span class="keyword">this</span>, <span class="number">30</span>, <span class="number">10</span>)).into(ivGlide);</div></pre></td></tr></table></figure>
<p><img src="http://oqle0m5m6.bkt.clouddn.com/%E5%9C%86%E8%A7%92.png" width="288" height="512" align="center"></p>
<h3 id="裁剪"><a href="#裁剪" class="headerlink" title="裁剪"></a>裁剪</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).bitmapTransform(<span class="keyword">new</span> CropCircleTransformation(<span class="keyword">this</span>)).into(ivGlide);</div></pre></td></tr></table></figure>
<p><img src="http://oqle0m5m6.bkt.clouddn.com/%E5%9C%86.png" width="288" height="512" align="center"></p>
<h3 id="特效"><a href="#特效" class="headerlink" title="特效"></a>特效</h3><ul>
<li>模糊效果</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).bitmapTransform(<span class="keyword">new</span> BlurTransformation(<span class="keyword">this</span>)).into(ivGlide);</div></pre></td></tr></table></figure>
<p><img src="http://oqle0m5m6.bkt.clouddn.com/%E6%A8%A1%E7%B3%8A.png" width="288" height="512" align="center"></p>
<ul>
<li>复杂的模糊效果</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).bitmapTransform(<span class="keyword">new</span> BlurTransformation(<span class="keyword">this</span>, <span class="number">25</span>), <span class="keyword">new</span> CropCircleTransformation(<span class="keyword">this</span>)).into(ivGlide);</div></pre></td></tr></table></figure>
<p><img src="http://oqle0m5m6.bkt.clouddn.com/%E5%A4%8D%E6%9D%82%E6%A8%A1%E7%B3%8A.png" width="288" height="512" align="center"></p>
<h2 id="Glide进阶用法"><a href="#Glide进阶用法" class="headerlink" title="Glide进阶用法"></a>Glide进阶用法</h2><h3 id="显示加载进度条"><a href="#显示加载进度条" class="headerlink" title="显示加载进度条"></a>显示加载进度条</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">pbGlide.setVisibility(View.VISIBLE);</div><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).listener(<span class="keyword">new</span> RequestListener&lt;String, GlideDrawable&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onException</span><span class="params">(Exception e, String model, Target&lt;GlideDrawable&gt; target, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">        pbGlide.setVisibility(View.GONE);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onResourceReady</span><span class="params">(GlideDrawable resource, String model, Target&lt;GlideDrawable&gt; target, <span class="keyword">boolean</span> isFromMemoryCache, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">        pbGlide.setVisibility(View.GONE);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;).into(ivGlide);</div></pre></td></tr></table></figure>
<h3 id="动态的调整大小"><a href="#动态的调整大小" class="headerlink" title="动态的调整大小"></a>动态的调整大小</h3><p>在图片获取后为了再次调整<code>ImageView</code>，首先定义一个<code>SimpleTarget&lt;Bitmap&gt;</code>对象去拦截被加载的<code>Bitmap</code>：</p>
<ul>
<li>创建SimpleTarget对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> SimpleTarget target = <span class="keyword">new</span> SimpleTarget&lt;Bitmap&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResourceReady</span><span class="params">(Bitmap resource, GlideAnimation&lt;? <span class="keyword">super</span> Bitmap&gt; glideAnimation)</span> </span>&#123;</div><div class="line">        ivGlide.setImageBitmap(resource);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>加载图片</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).asBitmap().into(target);</div></pre></td></tr></table></figure>
<p><strong>注意</strong>：SimpleTarget对象必须作为成员字段或方法存储，不能作为一个匿名类，否则达不到预期效果。因为Glide接受这个参数是作为一个弱引用，并且由于匿名类不在被引用时可能被垃圾回收，获取图像的网络请求可能会完成，但这个匿名类已经被回收了。</p>
<p>也就是说，以下的代码并不能起到动态调整大小的作用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>).load(URL_IMG).into(<span class="keyword">new</span> SimpleTarget&lt;GlideDrawable&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResourceReady</span><span class="params">(GlideDrawable resource, GlideAnimation&lt;? <span class="keyword">super</span> GlideDrawable&gt; glideAnimation)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Glide网络框架"><a href="#Glide网络框架" class="headerlink" title="Glide网络框架"></a>Glide网络框架</h2><p>默认情况下，Glide使用<code>Volley</code>作为网络请求框架。</p>
<h3 id="使用OkHttp"><a href="#使用OkHttp" class="headerlink" title="使用OkHttp"></a>使用OkHttp</h3><ul>
<li>添加okhttp3-integration依赖</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">compile</span> <span class="string">'com.github.bumptech.glide:okhttp3-integration:1.4.0@aar'</span></div></pre></td></tr></table></figure>
<ul>
<li>为Glide配置OkHttp</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</div><div class="line">Glide.get(getApplicationContext()).register(GlideUrl.class, InputStream.class, <span class="keyword">new</span> OkHttpUrlLoader.Factory(client));</div></pre></td></tr></table></figure>
<ul>
<li>在AndroidManifest.xml中声明使用了OkHttp的Glide</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></div><div class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.bumptech.glide.integration.okhttp3.OkHttpGlideModule"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">"GlideModule"</span> /&gt;</span></div></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/Glide用法/">Glide用法</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/10/19/glide-analyse-source-code/" class="pre">Android Glide完全解析(下)：Glide源码解析</a><a href="/2017/10/17/android-okhttp-down/" class="next">Android okhttp完全解析(下)：okhttp源码解析</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contenus</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#添加依赖"><span class="toc-text">添加依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Glide基本用法"><span class="toc-text">Glide基本用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置Glide"><span class="toc-text">配置Glide</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#裁剪图片"><span class="toc-text">裁剪图片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调试程序"><span class="toc-text">调试程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#OOM加载错误"><span class="toc-text">OOM加载错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#加载错误"><span class="toc-text">加载错误</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变换图片"><span class="toc-text">变换图片</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#圆角图片"><span class="toc-text">圆角图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#裁剪"><span class="toc-text">裁剪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#特效"><span class="toc-text">特效</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Glide进阶用法"><span class="toc-text">Glide进阶用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#显示加载进度条"><span class="toc-text">显示加载进度条</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态的调整大小"><span class="toc-text">动态的调整大小</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Glide网络框架"><span class="toc-text">Glide网络框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用OkHttp"><span class="toc-text">使用OkHttp</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Récent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/11/09/butterknife-analyze/">ButterKnife的使用及其解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/03/recyclerview-all/">RecyclerView全知道</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/27/retrofit-base-advance/">Android Retrofit完全解析(下)：Retrofit源码解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/27/retrofit-base-use/">Android Retrofit完全解析(上)：Retrofit用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/rxjava-high-use/">RxJava高阶用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/rxjava-base-use/">RxJava基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/builder-pattern/">设计模式之建造者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-use-realm/">Realm数据库使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-ndk-jni/">Android的JNI和NDK编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/android-hotfix/">Android热修复框架Tinker应用</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> Catégories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design-pattern/">Design pattern</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RxJava/">RxJava</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/okhttp源码解析/" style="font-size: 15px;">okhttp源码解析</a> <a href="/tags/RxJava-MVP-Retrofit/" style="font-size: 15px;">RxJava MVP Retrofit</a> <a href="/tags/加固渠道/" style="font-size: 15px;">加固渠道</a> <a href="/tags/https接口/" style="font-size: 15px;">https接口</a> <a href="/tags/适配器模式/" style="font-size: 15px;">适配器模式</a> <a href="/tags/Android架构/" style="font-size: 15px;">Android架构</a> <a href="/tags/组件化/" style="font-size: 15px;">组件化</a> <a href="/tags/自定义View/" style="font-size: 15px;">自定义View</a> <a href="/tags/JNI和NDK/" style="font-size: 15px;">JNI和NDK</a> <a href="/tags/热修复/" style="font-size: 15px;">热修复</a> <a href="/tags/RecyclerView/" style="font-size: 15px;">RecyclerView</a> <a href="/tags/建造者模式/" style="font-size: 15px;">建造者模式</a> <a href="/tags/Glide源码解析/" style="font-size: 15px;">Glide源码解析</a> <a href="/tags/OkHttp用法/" style="font-size: 15px;">OkHttp用法</a> <a href="/tags/realm/" style="font-size: 15px;">realm</a> <a href="/tags/ButterKnife/" style="font-size: 15px;">ButterKnife</a> <a href="/tags/观察者模式/" style="font-size: 15px;">观察者模式</a> <a href="/tags/Glide用法/" style="font-size: 15px;">Glide用法</a> <a href="/tags/Retrofit/" style="font-size: 15px;">Retrofit</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/单例模式/" style="font-size: 15px;">单例模式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> À suivre</i></div><ul></ul><a href="https://guides.codepath.com/android" title="CodePath" target="_blank">CodePath</a><ul></ul><a href="https://realm.io/" title="Realm" target="_blank">Realm</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">RSS</a> |  <a href="/about/">À propos</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">dayongxin.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>